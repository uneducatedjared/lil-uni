# TODO List 项目说明文档

## 0. 产品规划
- **产品定位**: ToC场景，假设产品是类似滴答清单的垂类竞品。
## 1. 技术选型
- **编程语言**：Typescript，理由：我个人的技术栈对网页开发熟悉。所以我一开始想的是next.js/express+react/react+fastapi。
  1. next.js 快速demo原型交付，功能多的话代码非常杂乱。
  2. express+react js/ts全栈人士，前后端分离，多端应用，实时协作，后期可拓展
  3. fastapi+react 性能高，ai集成度好。
当前逻辑简单，快速开发用next.js+tailwindcss
- **框架/库**：React，理由：组件化方便，利于多端拓展。
  1. vue 没用过，桌面/移动端也可以用electron/react native开发
- **数据库/存储**：indexeddb，理由：数据结构相对固定，todo数据隐私要求高
  1. mongodb 数据内容结构不固定可以使用，当下场景较固定
  2. postgres 有用户系统/协作场景可以使用


## 2. 项目结构设计
- **整体架构说明**：本项目是一个纯前端的 Next.js 应用，所有数据都存储在用户浏览器的 IndexedDB 中，实现了客户端的持久化存储，无后端服务。应用的状态管理主要通过 React 的组件状态和自定义事件（`CustomEvent`）来完成。
- **目录结构**：
- 目录结构：  
  ```
  todo-list/
    app/
    components/ 
    lib/
    public/
    types/
  ```  
- **模块职责说明**：
  - `app/`: 定义了应用的入口、根布局和全局 CSS。
  - `components/`: 包含了所有可复用的React组件，每个组件负责一部分UI的渲染和交互。
  - `lib/`: 存放与UI无关的核心业务逻辑。`db.ts` 封装了 IndexedDB 的所有操作，`reminder.ts` 负责任务提醒的调度和通知，`utils.ts` 提供辅助函数。
  - `types/`: 定义了核心数据结构，如 `Task` 接口，确保整个应用的数据一致性。
## 3. 需求细节与决策
- **描述是否必填？如何处理空输入？**
  - **任务标题 (`title`)** 是必填项。在新建/编辑任务的弹窗中，如果标题为空，"保存"按钮会被禁用，防止用户创建空任务。
  - **任务描述 (`description`)** 是选填项，可以为空。
  - 其他字段如 **优先级** 和 **类别** 都有默认值（分别为"中"和"其他"），即使用户不选择，也会自动填充。

- **已完成的任务在 UI 或 CLI 中如何显示？**
  - 在任务列表中，已完成的任务标题会添加删除线样式以作区分。
  - 在排序时，已完成的任务会自动被排到列表的底部，以突出显示未完成项。

- **任务排序逻辑（默认按创建时间，用户可选按优先级）。**
  - 默认排序方式是**按创建时间倒序**排列，即最新创建的任务在最上面。已完成任务放在最低端。
  - 用户可以通过下拉菜单切换排序方式，支持：
    1. **按创建时间**（倒序）
    2. **按截止日期**（升序）
    3. **按优先级**（高 > 中 > 低）

- **如果涉及扩展功能（例如同步/提醒），简述设计思路。**
  - **提醒功能**：已实现。设计思路如下：
    1. **触发**: 用户在编辑任务时，可以设置一个相对于“截止日期”的提醒时间（如“1小时前”或“1天前”）。
    2. **调度**: 当任务列表加载时，会调用 `scheduleReminders` 函数。该函数会遍历所有未完成且设置了提醒的任务。
    3. **授权**: 如果浏览器尚未授予通知权限，会向用户发起请求。如果用户已拒绝，会提示用户去设置中开启。
    4. **执行**: 使用 `setTimeout` 来精确安排在提醒时间点触发一个系统通知。利用浏览器的 `Notification API` 来显示提醒内容。  

## 4. AI 使用说明
- 是否使用 AI 工具？（ChatGPT / Copilot / Cursor / 其他）
  - 是，主要是cursor。
- 使用 AI 的环节：  
  - 代码片段生成  
  - Bug 定位  
  - 文档初稿编写 
- AI 输出如何修改：
  - 写prompt限定范围，比如技术方案限定框架，确定输入输出等控制颗粒度。  

## 5. 运行与测试方式
- 本地运行方式
  ```
  git clone 本项目
  cd todo-list
  pnpm install 
  pnpm run dev
  ```
- 已测试过的环境
  - 本地
  - 云端：部署在 https://lil-uni-todo.vercel.app/
- 已知问题与不足
  - 前端有点丑，一致性还可以改改
  - 后端代码也许可以再分细一点service文件夹之类的

## 6. 总结与反思
- 如果有更多时间，你会如何改进？  
  - 做个用户系统吧，数据不上云总是有点难受
  - 还想加个周度/月度报告系统
  - 前端代码太乱了
- 你觉得这个实现的最大亮点是什么？  
  - 还挺好看的